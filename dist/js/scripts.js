let pokemonRepository=function(){let e=[];function t(t){"object"==typeof t?"string"==typeof t.name&&"string"==typeof t.detailsUrl&&e.push(t):console.log("Pokemon doesn't have correct object format")}function n(){return e}function o(e){let t=document.querySelector(".pokemon-list"),n=document.createElement("li");n.classList.add("col-12","col-sm-6","col-md-4","col-lg-3","mb-4"),n.setAttribute("style","height: 250px"),n.setAttribute("role","listitem");let o=document.createElement("button");o.classList.add("btn","btn-light","border-dark","shadow","w-100","h-100"),o.setAttribute("data-bs-toggle","modal"),o.setAttribute("data-bs-target","#pokemonModal");let i=document.createElement("div");o.setAttribute("alt",`Button for details of Pokemon ${e.name}`),i.setAttribute("style","height:100%; width:auto");let r=document.createElement("img");r.setAttribute("alt",`Image of Pokemon ${e.name}`),r.setAttribute("style","height:80%; width:auto");let l=document.createElement("p");l.classList.add("w-100","mb-0","mt-2"),r.src=e.imageUrl,l.innerHTML=e.name,i.append(r,l),o.appendChild(i),n.appendChild(o),t.appendChild(n),o.addEventListener("mouseenter",function(){r.src=e.shinyUrl}),o.addEventListener("mouseleave",function(){r.src=e.imageUrl}),o.addEventListener("click",function(){a(e)})}function i(e){return fetch(e.detailsUrl).then(function(e){return e.json()}).then(function(t){e.imageUrl=t.sprites.other["official-artwork"].front_default,e.shinyUrl=t.sprites.other["official-artwork"].front_shiny,e.height=t.height/10,e.types=t.types,e.weight=t.weight/10,e.abilities=t.abilities}).catch(function(){console.log("Error loading Pokemon details")})}function a(e){i(e).then(function(){r(e)})}function r(e){let t=document.querySelector("#pokemonModalLabel"),n=document.querySelector(".modal-body"),o=document.querySelector(".modal-content"),i=document.querySelector(".modal-header");if(o.setAttribute("alt",`Details of Pokemon ${e.name}`),t.innerText=e.name,e.types[1]){let a=l(e.types[0].type.name),r=l(e.types[1].type.name);i.style.backgroundImage=`linear-gradient(to right, ${a}, ${r})`}else{let s=l(e.types[0].type.name);i.style.backgroundImage=`linear-gradient(to right, white, ${s})`}n.innerHTML=`
      <img src="${e.imageUrl}" class="img-fluid" alt="${e.name}" style="width: 40%">
      <p>Height: ${e.height} m</p>
      <p>Weight: ${e.weight} kg</p>
      <p>Type: ${e.types.map(e=>e.type.name).join(", ")}</p>
      <p>Abilities: ${e.abilities.map(e=>e.ability.name).join(", ")}</p>`}function l(e){let t={grass:"#79c951",poison:"#a141a1",fire:"#f08030",flying:"#a890f0",water:"#6890f0",bug:"#a9b820",normal:"#a9a879",electric:"#f9d030",ground:"#e1c068",fairy:"#ef99ac",fighting:"#c13028",psychic:"#f95888",steel:"#b8b8d1",ice:"#98d8d8",ghost:"#705898",dragon:"#7138f8",default:"#f8f9fa"};return t[e]||t.default}function s(t){let n=e.filter(e=>e.name.includes(t.toLowerCase()));document.querySelector(".pokemon-list").innerHTML="",n.forEach(e=>o(e))}return document.getElementById("search-button").addEventListener("click",function(){s(document.querySelector("#search-input").value)}),{getAll:n,add:t,addListItem:o,showDetails:a,loadList:function e(){return fetch("https://pokeapi.co/api/v2/pokemon/?limit=150").then(function(e){return e.json()}).then(function(e){e.results.forEach(function(e){let n={name:e.name,detailsUrl:e.url};t(n),i(n).then(function(){o(n)})})}).catch(function(){console.log("Error finding Pokemon")})},loadDetails:i,showModal:r,colorCode:l,filterPokemon:s}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.loadDetails(e).then(function(){pokemonRepository.addListItem(e)})})});